{
    "Blueprints": {
        "security": {
            "type": "NONE"
        },
        "stack_name": "BIGTOP",
        "stack_version": "3.2.0"
    },
    "configurations": [
        {
            "hbase-site": {
                "hbase.rootdir": "hdfs://mytestcluster/apps/hbase/data",
                "hbase.tmp.dir": "/tmp/hbase-${user.name}",
                "hbase.client.retries.number": "35"
            }
        },
        {
            "hive-site": {
                "hive.server2.webui.port": "10003",
                "javax.jdo.option.ConnectionDriverName": "org.postgresql.Driver",
                "javax.jdo.option.ConnectionURL": "jdbc:postgresql://udh1:5432/hive",
                "ambari.hive.db.schema.name": "hive",
                "javax.jdo.option.ConnectionUserName": "hive",
                "javax.jdo.option.ConnectionPassword": "hive",
                "hive.security.authorization.enabled": "true",
                "hive.server2.logging.operation.log.location": "/tmp/hive/operation_logs"
            }
        },
        {
            "hiveserver2-site": {
                "hive.security.authorization.enabled": "true",
                "hive.security.authorization.manager": "org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizerFactory",
                "hive.conf.restricted.list": "hive.security.authenticator.manager,hive.security.authorization.manager,hive.security.metastore.authorization.manager,hive.security.metastore.authenticator.manager,hive.users.in.admin.role,hive.server2.xsrf.filter.enabled,hive.security.authorization.enabled",
                "hive.metastore.metrics.enabled": "true"
            }
        },
        {
            "hive-env": {
                "hive_database": "Existing PostgreSQL Database",
                "hive_database_type": "postgres",
                "hive_database_name": "hive",
                "hive_user": "hive",
                "hive_log_dir": "/var/log/hive",
                "hcat_log_dir": "/var/log/webhcat",
                "heap_dump_location": "/tmp"
            }
        },
        {
            "hdfs-site": {
                "dfs.namenode.checkpoint.dir": "/hadoop/hdfs/namesecondary",
                "dfs.namenode.name.dir": "/data/sdv1/hdfs/namenode",
                "dfs.journalnode.edits.dir": "/data/sdv1/hdfs/journalnode",
                "dfs.client.failover.proxy.provider.mytestcluster": "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider",
                "dfs.ha.automatic-failover.enabled": "true",
                "dfs.ha.fencing.methods": "shell(/bin/true)",
                "dfs.ha.namenodes.mytestcluster": "nn1,nn2",
                "dfs.namenode.http-address.mytestcluster.nn1": "udh2:50070",
                "dfs.namenode.http-address.mytestcluster.nn2": "udh3:50070",
                "dfs.namenode.https-address.mytestcluster.nn1": "udh2:50470",
                "dfs.namenode.https-address.mytestcluster.nn2": "udh3:50470",
                "dfs.namenode.rpc-address.mytestcluster.nn1": "udh2:8020",
                "dfs.namenode.rpc-address.mytestcluster.nn2": "udh3:8020",
                "dfs.namenode.shared.edits.dir": "qjournal://udh1:8485;udh3:8485;udh2:8485/mytestcluster",
                "dfs.nameservices": "mytestcluster",
                "dfs.namenode.inode.attributes.provider.class": "org.apache.ranger.authorization.hadoop.RangerHdfsAuthorizer",
                "dfs.datanode.data.dir": "/data/sdv1/hadoop/hdfs/data"
            }
        },
        {
            "core-site": {
                "hadoop.proxyuser.*": "*",
                "fs.defaultFS": "hdfs://mytestcluster",
                "ha.zookeeper.quorum": "udh2:2181,udh3:2181,udh4:2181",
                "hadoop.security.authentication": "simple",
                "hadoop.http.authentication.simple.anonymous.allowed": "true",
                "hadoop.http.authentication.type": "simple",
                "fs.trash.interval": "360",
                "hadoop.security.authorization": "true"
            }
        },
        {
            "admin-properties": {
                "properties": {
                    "DB_FLAVOR": "POSTGRES",
                    "db_host": "udh1",
                    "db_name": "ranger",
                    "db_user": "ranger",
                    "db_password": "ranger",
                    "policymgr_external_url": "http://udh4:6080"
                }
            }
        },
        {
            "ranger-admin-site": {
                "ranger.externalurl": "http://udh4:6080",
                "ranger.logs.base.dir": "/var/log/ranger/admin",
                "ranger.jpa.jdbc.driver": "org.postgresql.Driver",
                "ranger.jpa.jdbc.url": "jdbc:postgresql://udh1:5432/ranger",
                "ranger.audit.source.type": "solr",
                "ranger.audit.solr.zookeepers": "udh2:2181,udh3:2181,udh4:2181/infra-solr"
            }
        },
        {
            "ranger-env": {
                "ranger_admin_log_dir": "/var/log/ranger/admin",
                "ranger_usersync_log_dir": "/var/log/ranger/usersync",
                "admin_username": "admin",
                "admin_password": "AsdQwe123456",
                "ranger_admin_username": "amb_ranger_admin",
                "ranger_admin_password": "AsdQwe123456",
                "rangerusersync_user_password": "AsdQwe123456",
                "rangertagsync_user_password": "AsdQwe123456",
                "keyadmin_user_password": "AsdQwe123456",
                "xasecure.audit.destination.db": "false",
                "xasecure.audit.destination.hdfs": "true",
                "xasecure.audit.destination.solr": "true",
                "is_solrCloud_enabled": "true",
                "create_db_dbuser": "false"
            }
        },
        {
            "ranger-ugsync-site": {
                "ranger.usersync.logdir": "/var/log/ranger/usersync",
                "ranger.usersync.enabled": "true"
            }
        },
        {
            "ranger-tagsync-site": {
                "ranger.tagsync.logdir": "/var/log/ranger/tagsync"
            }
        },
        {
            "infra-solr-client-log4j": {
                "infra_solr_client_log_dir": "/var/log/ambari-infra-solr-client"
            }
        },
        {
            "infra-solr-env": {
                "infra_solr_datadir": "/data/sdv1/ambari-infra-solr/data",
                "infra_solr_log_dir": "/var/log/ambari-infra-solr"
            }
        },
        {
            "yarn-site": {
                "hadoop.registry.zk.quorum": "udh2:2181 ,udh3:2181 ,udh4:2181 ",
                "yarn.resourcemanager.recovery.enabled": "true",
                "yarn.resourcemanager.store.class": "org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore",
                "yarn.resourcemanager.cluster-id": "yarn-cluster",
                "yarn.resourcemanager.ha.enabled": "true",
                "yarn.resourcemanager.ha.automatic-failover.zk-base-path": "/yarn-leader-election",
                "yarn.resourcemanager.ha.rm-ids": "rm1,rm2",
                "yarn.resourcemanager.address": "udh2:8050",
                "yarn.resourcemanager.scheduler.address": "udh2:8030",
                "yarn.resourcemanager.resource-tracker.address": "udh2:8025",
                "yarn.resourcemanager.admin.address": "udh2:8141",
                "yarn.resourcemanager.hostname": "udh2:8088",
                "yarn.resourcemanager.hostname.rm1": "udh2",
                "yarn.resourcemanager.hostname.rm2": "udh3",
                "yarn.resourcemanager.webapp.address": "udh2:8088",
                "yarn.resourcemanager.webapp.address.rm1": "udh2:8088",
                "yarn.resourcemanager.webapp.address.rm2": "udh3:8088",
                "yarn.resourcemanager.webapp.https.address": "udh2:8090",
                "yarn.resourcemanager.webapp.https.address.rm1": "udh2:8090",
                "yarn.resourcemanager.webapp.https.address.rm2": "udh3:8090",
                "yarn.resourcemanager.zk-address": "udh2:2181,udh3:2181,udh4:2181",
                "hadoop.registry.dns.bind-port": "53",
                "yarn.client.nodemanager-connect.retry-interval-ms": "10000",
                "yarn.nodemanager.local-dirs": "/data/sdv1/yarn/local",
                "yarn.nodemanager.log-dirs": "/data/sdv1/yarn/log",
                "yarn.timeline-service.leveldb-state-store.path": "/data/sdv1/yarn/timeline",
                "yarn.timeline-service.leveldb-timeline-store.path": "/data/sdv1/yarn/timeline"
            }
        },
        {
            "kafka-broker": {
                "log.dirs": "/data/sdv1/kafka-logs",
                "zookeeper.session.timeout.ms": "30000"
            }
        },
        {
            "ams-site": {
                "timeline.metrics.service.operation.mode": "distributed",
                "timeline.metrics.aggregator.checkpoint.dir": "/var/lib/ambari-metrics-collector/checkpoint",
                "phoenix.spool.directory": "/var/lib/ambari-metrics-collector/hbase-tmp/phoenix-spool"
            }
        },
        {
            "ams-env": {
                "metrics_collector_log_dir": "/var/log/ambari-metrics-collector",
                "metrics_monitor_log_dir": "/var/log/ambari-metrics-monitor"
            }
        },
        {
            "ams-hbase-site": {
                "hbase.cluster.distributed": "true",
                "hbase.rootdir": "hdfs://mytestcluster/ambari-metrics-collector/hbase",
                "hbase.tmp.dir": "/var/lib/ambari-metrics-collector/hbase-tmp"
            }
        },
        {
            "ams-hbase-env": {
                "hbase_log_dir": "/var/log/ambari-metrics-collector"
            }
        },
        {
            "ams-grafana-env": {
                "metrics_grafana_log_dir": "/var/log/ambari-metrics-grafana",
                "metrics_grafana_data_dir": "/var/lib/ambari-metrics-grafana"
            }
        },
        {
            "spark-env": {
                "spark_log_dir": "/var/log/spark"
            }
        },
        {
            "zookeeper-env": {
                "zk_log_dir": "/var/log/zookeeper"
            }
        }
    ],
    "host_groups": [
        {
            "name": "group0",
            "configurations": [],
            "cardinality": "1",
            "components": [
                {
                    "name": "AMBARI_SERVER"
                },
                {
                    "name": "YARN_REGISTRY_DNS"
                },
                {
                    "name": "TIMELINE_READER"
                },
                {
                    "name": "WEBHCAT_SERVER"
                },
                {
                    "name": "INFRA_SOLR"
                },
                {
                    "name": "APP_TIMELINE_SERVER"
                },
                {
                    "name": "HISTORYSERVER"
                },
                {
                    "name": "JOURNALNODE"
                },
                {
                    "name": "HBASE_CLIENT"
                },
                {
                    "name": "INFRA_SOLR_CLIENT"
                },
                {
                    "name": "YARN_CLIENT"
                },
                {
                    "name": "SPARK_CLIENT"
                },
                {
                    "name": "HCAT"
                },
                {
                    "name": "ZOOKEEPER_CLIENT"
                },
                {
                    "name": "FLINK_CLIENT"
                },
                {
                    "name": "HDFS_CLIENT"
                },
                {
                    "name": "HIVE_CLIENT"
                },
                {
                    "name": "METRICS_MONITOR"
                },
                {
                    "name": "MAPREDUCE2_CLIENT"
                },
                {
                    "name": "TEZ_CLIENT"
                }
            ]
        },
        {
            "name": "group1",
            "configurations": [],
            "cardinality": "1",
            "components": [
                {
                    "name": "NAMENODE"
                },
                {
                    "name": "RESOURCEMANAGER"
                },
                {
                    "name": "ZKFC"
                },
                {
                    "name": "HBASE_MASTER"
                },
                {
                    "name": "ZOOKEEPER_SERVER"
                },
                {
                    "name": "HIVE_SERVER"
                },
                {
                    "name": "DATANODE"
                },
                {
                    "name": "NODEMANAGER"
                },
                {
                    "name": "JOURNALNODE"
                },
                {
                    "name": "HBASE_REGIONSERVER"
                },
                {
                    "name": "HBASE_CLIENT"
                },
                {
                    "name": "INFRA_SOLR_CLIENT"
                },
                {
                    "name": "YARN_CLIENT"
                },
                {
                    "name": "SPARK_CLIENT"
                },
                {
                    "name": "HCAT"
                },
                {
                    "name": "ZOOKEEPER_CLIENT"
                },
                {
                    "name": "FLINK_CLIENT"
                },
                {
                    "name": "HDFS_CLIENT"
                },
                {
                    "name": "HIVE_CLIENT"
                },
                {
                    "name": "METRICS_MONITOR"
                },
                {
                    "name": "MAPREDUCE2_CLIENT"
                },
                {
                    "name": "TEZ_CLIENT"
                }
            ]
        },
        {
            "name": "group2",
            "configurations": [],
            "cardinality": "1",
            "components": [
                {
                    "name": "METRICS_COLLECTOR"
                },
                {
                    "name": "METRICS_GRAFANA"
                },
                {
                    "name": "SPARK_JOBHISTORYSERVER"
                },
                {
                    "name": "RANGER_TAGSYNC"
                },
                {
                    "name": "RANGER_ADMIN"
                },
                {
                    "name": "RANGER_USERSYNC"
                },
                {
                    "name": "FLINK_HISTORYSERVER"
                },
                {
                    "name": "HIVE_METASTORE"
                },
                {
                    "name": "SPARK_THRIFTSERVER"
                },
                {
                    "name": "ZOOKEEPER_SERVER"
                },
                {
                    "name": "HIVE_SERVER"
                },
                {
                    "name": "NODEMANAGER"
                },
                {
                    "name": "DATANODE"
                },
                {
                    "name": "HBASE_CLIENT"
                },
                {
                    "name": "INFRA_SOLR_CLIENT"
                },
                {
                    "name": "YARN_CLIENT"
                },
                {
                    "name": "SPARK_CLIENT"
                },
                {
                    "name": "HCAT"
                },
                {
                    "name": "ZOOKEEPER_CLIENT"
                },
                {
                    "name": "FLINK_CLIENT"
                },
                {
                    "name": "HDFS_CLIENT"
                },
                {
                    "name": "HIVE_CLIENT"
                },
                {
                    "name": "METRICS_MONITOR"
                },
                {
                    "name": "MAPREDUCE2_CLIENT"
                },
                {
                    "name": "TEZ_CLIENT"
                }
            ]
        },
        {
            "name": "group3",
            "configurations": [],
            "cardinality": "1",
            "components": [
                {
                    "name": "DATANODE"
                },
                {
                    "name": "NODEMANAGER"
                },
                {
                    "name": "HBASE_REGIONSERVER"
                },
                {
                    "name": "KAFKA_BROKER"
                },
                {
                    "name": "HBASE_CLIENT"
                },
                {
                    "name": "INFRA_SOLR_CLIENT"
                },
                {
                    "name": "YARN_CLIENT"
                },
                {
                    "name": "SPARK_CLIENT"
                },
                {
                    "name": "HCAT"
                },
                {
                    "name": "ZOOKEEPER_CLIENT"
                },
                {
                    "name": "FLINK_CLIENT"
                },
                {
                    "name": "HDFS_CLIENT"
                },
                {
                    "name": "HIVE_CLIENT"
                },
                {
                    "name": "METRICS_MONITOR"
                },
                {
                    "name": "MAPREDUCE2_CLIENT"
                },
                {
                    "name": "TEZ_CLIENT"
                }
            ]
        }
    ],
    "settings": [
        {
            "deployment_settings": [
                {
                    "skip_failure": "true"
                }
            ]
        },
        {
            "recovery_settings": [
                {
                    "recovery_enabled": "true"
                }
            ]
        }
    ]
}